!function t(e,n,i){function r(s,o){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!o&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=t("./rack.js"),a=i(r),s=function(){var t=document.querySelector(".cart-panel"),e=document.querySelector(".back-splash-main"),n=document.querySelector(".cart-panel-trigger");new a.default(".rack",{itemClass:".frame"});var i=function(){n.classList.toggle("open"),t.classList.toggle("is-visible"),e.classList.toggle("hidden"),e.classList.toggle("visible")};n.addEventListener("click",i,!1),e.addEventListener("click",i,!1)};document.addEventListener("DOMContentLoaded",s,!1);var o=document.querySelector(".rack-count-display");window.addEventListener("rack:currentItem",function(t){o.textContent=t.detail.current+1+" of "+t.detail.count})},{"./rack.js":5}],2:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.container=document.querySelector(e.container),this.cart=document.querySelector(e.target),this.trigger=e.trigger,this.itemToAnimate=e.itemToAnimate,this.clone=null,this.run()}return r(t,[{key:"run",value:function(){var t=this;this.trigger.addEventListener("click",function(e){return t.set(e,e.target)})}},{key:"set",value:function(t,e){var n=this,i=this.container.querySelector("#"+this.itemToAnimate),r=i.getBoundingClientRect(),a=r.top,s=r.left,o=i.offsetWidth,c=i.offsetHeight;return this.clone=i.cloneNode(!1),this.clone.className="clone",this.setStyles(this.clone,{top:a+"px",left:s+"px",width:o+"px",height:c+"px"}),document.body.appendChild(this.clone),requestAnimationFrame(function(){n.animate(e.parentNode)})}},{key:"animate",value:function(t){var e=this.cart.getBoundingClientRect(),n=e.top,i=e.left,r=e.width,a=e.height;return n+=a/2,i+=r/2,this.setStyles(this.clone,{top:n+"px",left:i+"px",width:"20px",height:"20px"}),this.trackAnim(this.clone).then(function(t){t.remove()})}},{key:"trackAnim",value:function(t){return new Promise(function(e,n){t.addEventListener("transitionend",function n(i){if(i.target.removeEventListener(i.type,n),"width"===i.propertyName)return e(t)}.bind(this),!1)})}},{key:"setStyles",value:function(t,e){for(var n in e)t.style[n]=e[n];return t}}]),t}();n.default=a},{}],3:[function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),this.container=document.querySelector(e.container),this.views=document.querySelector(e.views),this.numOfViews=this.views.children.length,this.winW=this.container.offsetWidth,this.curX=0,this.diff=0,this.curViewNum=1,this.onMoveEvent=null,this.lastPosition={x:0,y:0}}return r(t,[{key:"init",value:function(){document.addEventListener("mousedown",this.onDown.bind(this)),document.addEventListener("touchstart",this.onDown.bind(this)),document.addEventListener("mouseup",this.onUp.bind(this)),document.addEventListener("touchend",this.onUp.bind(this))}},{key:"onDown",value:function(t){var e=t.pageX||t.touches[0].pageX,n=t.timeStamp,i=new CustomEvent("drag:down",{detail:{startTime:n,startX:e}});window.dispatchEvent(i),document.addEventListener("touchmove",this.onMoveEvent=function(t){this.onMove(t,e)}.bind(this)),document.addEventListener("mousemove",this.onMoveEvent=function(t){this.onMove(t,e)}.bind(this))}},{key:"onMove",value:function(t,e){document.body.style.pointerEvents="none";var n=t.clientX||t.touches[0].clientX,i=t.clientY||t.touches[0].clientY,r=this.lastPosition.x-n,a=this.lastPosition.y-i,s=Math.abs(r),o=Math.abs(a),c="";s>o&&r<0?c="right":s>o&&r>0?c="left":o>s&&a>0?c="up":o>s&&a<0&&(c="down"),this.lastPosition={x:n,y:i};var l=t.pageX||t.touches[0].pageX,u=new CustomEvent("drag:move",{detail:{direction:c,moveX:l,startX:e}});window.dispatchEvent(u)}},{key:"onUp",value:function(t){document.body.style.pointerEvents="auto";var e=t.timeStamp,n=new CustomEvent("drag:up",{detail:{endTime:e}});window.dispatchEvent(n),document.removeEventListener("mousemove",this.onMoveEvent),document.removeEventListener("touchmove",this.onMoveEvent)}}]),t}();n.default=a},{}],4:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./cart-to.js"),o=i(s),c=function(){function t(e){r(this,t),this.modal=document.querySelector(".modal"),this.close=this.modal.querySelector(".close"),this.container=this.modal.querySelector(".container"),this.backSplash=document.querySelector(".back-splash"),this.image=this.modal.querySelector(".rack-item")||new Image,this.image.className="rack-item",this.docFrag=document.createDocumentFragment(),this.content=document.createElement("div"),this.appContainer=null}return a(t,[{key:"create",value:function(t){this.appContainer=t.appContainer,this.setEvents(),this.show(t)}},{key:"setEvents",value:function(){window.addEventListener("keydown",this.keyNav.bind(this)),this.close.addEventListener("click",this.closeModal.bind(this)),this.backSplash.addEventListener("click",this.closeModal.bind(this))}},{key:"keyNav",value:function(t){return 27===t.which&&this.closeModal()}},{key:"cartButton",value:function(t){var e=document.createElement("button");return e.className="add-to-cart",e.textContent="Add to Cart",new o.default({container:".container",trigger:e,target:".cart",itemToAnimate:t.target.id}),e}},{key:"buildFragment",value:function(t){this.image.src=t.imageSrc,this.image.id=t.target.id,this.content.className="content",this.content.innerHTML=t.blurb,this.content.appendChild(this.cartButton(t)),this.docFrag.appendChild(this.image),this.docFrag.appendChild(this.content),this.container.appendChild(this.docFrag)}},{key:"clearContainer",value:function(){return this.container.innerHTML=""}},{key:"show",value:function(t){this.clearContainer(),this.buildFragment(t),this.modal.classList.remove("hide"),this.modal.classList.add("show"),this.backSplash.classList.remove("hidden"),this.backSplash.classList.add("visible")}},{key:"closeModal",value:function(){this.clearContainer(),this.modal.classList.remove("show"),this.modal.classList.add("hide"),this.backSplash.classList.remove("visible"),this.backSplash.classList.add("hidden")}}]),t}();n.default=c},{"./cart-to.js":2}],5:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=t("./dragger-event.js"),o=i(s),c=t("./modal.js"),l=i(c),u=function(){var t=document.createElement("div");if(null===t.style.transform){var e=["Webkit","Moz","ms"];for(var n in e)if(void 0!==t.style[e[n]+"Transform"])return e[n]+"Transform"}return"transform"}(),h=function(){function t(e,n){r(this,t),this.elem=e,this.itemClass=n.itemClass,this.parentElem=document.querySelector(this.elem),this.startElem=this.parentElem.children[0],this.hangers=this.parentElem.querySelectorAll(this.itemClass),this.hangersArry=Array.prototype.slice.call(this.hangers),this.hangerLen=this.hangers.length,this.hanggerClickEvent=null,this.moveX=0,this.startDragTime=0,this.endDragTime=0,this.velocity=0,this.currentElem=null,this.currentElemIndex=null,this.modal=new l.default,this.drag=new o.default({container:this.elem,views:this.itemClass}),this.init()}return a(t,[{key:"init",value:function(){this.setCount(this.hangersArry),this.setEvents(),this.drag.init()}},{key:"setEvents",value:function(){this.parentElem.addEventListener("click",this.hanggerClickEvent=function(t){this.onClickHanger(t,t.target)}.bind(this)),window.addEventListener("keydown",this.keyNav.bind(this)),window.addEventListener("drag:down",this.dragDown.bind(this)),window.addEventListener("drag:move",this.dragRack.bind(this)),window.addEventListener("drag:up",this.dragUp.bind(this))}},{key:"dragDown",value:function(t){return this.startDragTime=t.detail.startTime}},{key:"dragUp",value:function(t){return this.endDragTime=t.detail.endTime}},{key:"keyNav",value:function(t){var e=this.currentElemIndex;return 39===t.which||38===t.which?this.seek(e+1):37===t.which||40===t.which?this.seek(e-1):13===t.which?this.onClickHanger(null,this.currentElem):null}},{key:"dragRack",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.moveX=Math.abs(t.detail.moveX-t.detail.startX);var n=90,i=this.currentElemIndex;requestAnimationFrame(function(){e.moveX>15&&("right"===t.detail.direction?setTimeout(function(){e.seek(i-1)},n):"left"===t.detail.direction&&setTimeout(function(){e.seek(i+1)},n))})}},{key:"wheelRack",value:function(t){var e=this,n=this.currentElemIndex,i=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));return setTimeout(function(){i>0&&(e.seek(n-1),t.stopPropagation()),i<0&&(e.seek(n+1),t.stopPropagation())},120)}},{key:"broadcast",value:function(){var t=new CustomEvent("rack:currentItem",{detail:{current:this.currentElemIndex,count:this.hangersArry.length}});window.dispatchEvent(t)}},{key:"setCount",value:function(t){var e=0;return t.forEach(function(t,n){return t.querySelector("img").id="frame-"+e++,t.setAttribute("data-rackcount",n)}),this.initState()}},{key:"initState",value:function(){return this.parentElem.style.display="none",this.startElem.classList.add("active"),this.currentElem=this.startElem,this.currentElemIndex=parseInt(this.startElem.getAttribute("data-rackcount"),10),this.parentElem.style.display="",this.seek(this.currentElemIndex)}},{key:"onClickHanger",value:function(t,e){t&&t.preventDefault();var n=parseInt(e.getAttribute("data-rackcount"),10);if(e.classList.contains("active")){var i=e.querySelector(".rack-item"),r=e.querySelector(".blurb").outerHTML;return this.modal.create({appContainer:".rack-container",target:i,imageSrc:i.src,blurb:r})}return this.seek(n)}},{key:"seek",value:function(t){var e=this,n=this.hangersArry,i=0;n.filter(function(e){var n=parseInt(e.getAttribute("data-rackcount"),10);if(n===t)return i=n,e}).forEach(function(t){return e.currentElem.classList.remove("active"),e.currentElem=t,e.currentElemIndex=i,e.buildMatrix(e.parentElem,t)}),document.querySelector(".modal").classList.contains("show")&&this.onClickHanger(null,this.currentElem)}},{key:"buildMatrix",value:function(t,e){this.currentElem.classList.add("active"),this.transformPrevAll(this.getPrevAll(this.hangers,e),350),this.transformNextAll(this.getNextAll(this.hangers,e),350),this.broadcast()}},{key:"getPrevAll",value:function(t,e){var n=!0;return n=Array.prototype.filter.call(t,function(t){return t===e?n=!1:n})}},{key:"getNextAll",value:function(t,e){var n=!1;return n=Array.prototype.filter.call(t,function(t){return t.previousElementSibling===e?n=!0:n})}},{key:"transformPrevAll",value:function(t,e){var n=.15*e;t.reverse();for(var i=t.length;i-- >0;)t[i].style.cssText="\n        display: "+(i<=8?"initial":"none")+";\n        z-index: -"+e*i+";\n        "+[u]+": translateX(-"+e+"px) rotateY("+n+"deg) translateZ(-"+50*(i+1)+"px)\n      "}},{key:"transformNextAll",value:function(t,e){for(var n=.15*e,i=t.length;i-- >0;)t[i].style.cssText="\n        display: "+(i<=8?"initial":"none")+";\n        z-index: -"+e*i+";\n        "+[u]+": translateX("+e+"px) rotateY(-"+n+"deg) translateZ(-"+50*(i+1)+"px)\n      "}}]),t}();n.default=h},{"./dragger-event.js":3,"./modal.js":4}]},{},[1]);